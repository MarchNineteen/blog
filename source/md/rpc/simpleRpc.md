# [简单设计一个rpc框架](https://www.cnblogs.com/maratong/category/1650823.html)

## v1 基础设计 客户端&服务端 网络请求 序列化 

### 相关概念

什么是rpc

rpc，远程过程调用，简单来说就是远程方法调用，用代码的方式来说就是直接调用service方法，客户端调用就像调用本地接口一样。

简单的工作流程：

客户端发起请求，请求会带上相关参数，比如主机信息，参数信息，版本信息，调用标识，调用协议等等。服务端接收信息，执行过程，将结果返回。

涉及到相关因素：

消息封装格式。可以使用应用层的http协议，也可以使用传输层的tcp协议。

数据格式。客户端请求所需要携带的参数以及相关格式。

序列化。信息在网络传输中要以二进制格式进行传输。序列化和反序列化，是对象到而二进制数据的转换。常见的序列化方法有JSON、Hessian、Protostuff等。

网络IO模型。可以采用非阻塞式同步IO,也可以在服务器上实现对多路IO模型的支持。

线程模型。在高并发请求下，可以使用单个线程运行服务的具体实现，但是会出现请求阻塞等待现象。也可以为每一个RPC具体服务的实现开启一个独立的线程运行，最大线程数有限制，可以使用线程池来管理多个线程的分配和调度。

## v2 增加zk 作为注册中心  增加服务端心跳检测

## v3 异步请求&线程池 提高资源利用    注册中心持久化 方式宕机无法访问

## v4 客户端新增注册中心监听器 实时更新注册中心