---
title: mysql概要
date: 2018-09-05 
desc:
keywords: database data
categories: [database]
---
提到mysql等数据库，当然绕不开它最基本的概念，数据结构，数据库的索引就是数据结构最好的应用。
[对数据结构没有概念的同学请点击](/2019/01/04/datastructure/index/)

# 一：存储引擎（存储引擎提供不同的存储机制、索引技巧、锁定水平等功能）

## InnoDB与MYISAM比较
|  功 能 | MYISAM | InnoDB |
| :------: | :------: | :-------: |
| 存储限制 | 256TB | 64TB | 
| 支持事物 | 不支持 | 支持 | 
| 支持锁级别 | 表级锁 | 表级锁，行级锁 | 
| 支持外键 | 不支持 | 支持 | 
| 支持全文索引 | 支持 | 不支持 | 
| 支持数索引 | 支持 | 支持 | 
| 支持哈希索引 | 不支持 | 不支持 | 
| 支持数据缓存 | 不支持 | 支持 | 

# 二：索引

索引是在存储引擎层实现的，而不是在服务器层实现的，所以不同存储引擎具有不同的索引类型和实现。

## 1. B+Tree 索引

是大多数 MySQL 存储引擎的默认索引类型。

因为不再需要进行全表扫描，只需要**对树进行搜索**即可，所以查找速度快很多。

除了用于查找，还可以用于排序和分组。

可以指定多个列作为索引列，多个索引列共同组成键。

适用于全键值、键值范围和键前缀查找，其中键前缀查找只适用于最左前缀查找。如果不是按照索引列的顺序进行查找，则无法使用索引。

InnoDB 的 B+Tree 索引分为主索引和辅助索引。主索引的叶子节点 data 域记录着完整的数据记录，这种索引方式被称为聚簇索引。因为无法把数据行存放在两个不同的地方，所以一个表只能有一个聚簇索引。

辅助索引的叶子节点的 data 域记录着主键的值，因此在使用辅助索引进行查找时，需要先查找到主键值，然后再到主索引中进行查找。
 
## 2. 哈希索引

哈希索引能以 O(1) 时间进行查找，但是失去了有序性：

- 无法用于排序与分组；
- 只支持精确查找，无法用于部分查找和范围查找。
- 数据量大时，会产生hash冲突，性能降低。

InnoDB 存储引擎有一个特殊的功能叫“自适应哈希索引”，当某个索引值被使用的非常频繁时，会在 B+Tree 索引之上再创建一个哈希索引，这样就让 B+Tree 索引具有哈希索引的一些优点，比如快速的哈希查找。

## 3. 全文索引

MyISAM 存储引擎支持全文索引，用于查找文本中的关键词，而不是直接比较是否相等。

查找条件使用 MATCH AGAINST，而不是普通的 WHERE。

全文索引使用倒排索引实现，它记录着关键词到其所在文档的映射。

InnoDB 存储引擎在 MySQL 5.6.4 版本中也开始支持全文索引。

## 4. 空间数据索引

MyISAM 存储引擎支持空间数据索引（R-Tree），可以用于地理数据存储。空间数据索引会从所有维度来索引数据，可以有效地使用任意维度来进行组合查询。

必须使用 GIS 相关的函数来维护数据。

# 三：数据库拆分

# 四：数据库主从与读写分离
